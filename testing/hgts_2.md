2장. 테스트 소프트웨어 엔지니어

기능코드를 작성 시에는 창조적인 마음가짐, 사용자, 유스케이스, 작업 흐름을 염두에 둬야 하며, 테스트 코드의 경우에는 파괴적인 마음가짐을 가지고 사용자와 작업 흐름을 방해하는 방식으로 코드를 작성해야 한다.

- SWE
  - 기능 개발자. 고객에게 전달될 컴포넌트 개발
  - 기능 코드와 단위 테스트 코드 작성
- SET
  - 테스트 개발자
  - SWE를 도와 단위 테스트의 일부 작성하는데 도와줌
  - SWE가 중소형 테스트를 작성하는데 도움이 되는 좀 더 큰 테스트 프레임워크 작성
- TE
  - 사용자 개발자. 사용자 관점에서 품질 측정
  - 개발 측면 : 사용자 시나리오에 대한 자동화 구축
  - 제품 측면: 제품 전체를 측정하고 다른 역할의 엔지니어들이 수행한 테스팅 활동들이 어떻게 조화롭게 작용했는지 효과를 측정

# SET에 대한 이야기

## 개발과 테스트 작업 흐름

SET와 SWE는 새로운 제품이나 서비스의 개발에 있어 매우 긴밀한 관계를 형성하고, 실제로 작업하는 많은 부분이 서로 겹친다.

테스팅은 엔지니어링 팀 전체의 몫이기 때문에.

### 공유 코드

대부분의 구글 코드는 하나의 저장소(repository)와 공통 툴 체인을 통해 공유된다. 빌드와 릴리스 하려면 이러한 툴과 저장소를 사용해야 한다.

**모든 구글 엔지니어는 역할에 관계없이 이런 환경을 상세히 알아야하고, 팀 내에서 누구의 도움도 없이 새로운 코드를 체크인하거나 테스트를 제출하고 실행하고, 빌드를 런칭하는 작업을 수행할 수 있어야 한다.**

어떠한 소스코드든지 그것을 보길 원하는 모든 엔지니어는 이용할 수 있다!

이런 공유 코드는 구글의 제품 인프라스트럭처에서 공유 라이브러리들로 작업하기 때문에 높은 신뢰도를 갖고 동작하고, 프로젝트가 완성되는 속도 역시 더 빨라지고 결함 발생률을 줄인다.

- 프로젝트에 특화된 요구를 충족시키기 위한 목적 외에는 기존 라이브러리 재사용
- 공유 코드는 쓰기 쉬운 곳에 위치해야 하며 가독성이 좋아야 한다. 모든 코드는 미래에 누군가가 읽고 수정할 것을 대비해서 작성돼야 한다.
- 공유코드는 가능한한 재사용 가능하고 스스로 모든 내용을 담고 있어야 한다. 재사용의 중요성!
- 의존성이 드러나야 한다. 프로젝트 변경에 의해 공유 코드의 의존성에 영향이 있다는 걸 모르면 수정 굉장히 어려움
- 좀 더 나은 방법을 제안한 엔지니어는 기존 모든 라이브러리에 대해 리팩토링을 하고 연관된 프로젝트들이 새로운 라이브러리를 사용하게 도와야 한다.
- 진지하게 코드 리뷰 진행. 특히 가독성 관점에서 모든 코드를 리뷰해야 한다. 코딩 스타일 가이드라인 준수!
- 공유 저장소에 있는 코드는 테스팅에 대해 더 높은 기준을 적용한다.

### 플랫폼

플랫폼 의존성은 최소화해야 한다. 플랫폼 의존성이 있는 모든 코드는 플랫폼의 최하위 레벨에 라이브러리 형태로 들어감

구글에서는 각 프로그래밍 언어당 단 하나의 컴파일러만 사용하며, 하나의 리눅스 배포판에 대해 지속적으로 테스트하고 관리한다.

통합된 빌드 시스템 -> 단일 플랫폼 단일 저장소 -> 공유 저장소 내의 작업 단순화

아래는 빌드 전체 흐름

1. 하나 또는 그 이상의 소스 파일에서 서비스에 대한 클래스 또는 함수를 작성하고 모든 코드가 컴파일되게 한다.
2. 새로운 서비스에 대한 라이브러리 빌드 타겟을 식별한다.
3. 라이브러리를 임포트하는 단위 테스트를 작성하고, 의존성이 큰 부분에 대해서는 mock을 만들고, 가장 흥미로운 값을 입력으로 주어, 가장 관심가능 코드 경로를 수행한다.
4. 단위 테스트에 대해 테스트용 타겟을 빌드한다.
5. 테스트 타겟을 빌드하고 수행한다. 모든 테스트를 통과할 때까지 필요한 변경을 한다.
6. 코드 스타일 가이드 규약과 문제 검사하는 데 필요한 정적 분석 툴을 수행한다.
7. 코드 리뷰에 대한 결과 코드를 보내고 리뷰 결과에 따라 코드 변경, 모든 단위 테스트를 다시 수행한다.

